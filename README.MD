
# Serbian Transport Integration

![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)
![HACS](https://img.shields.io/badge/HACS-compatible-orange.svg)
![Home Assistant](https://img.shields.io/badge/Home%20Assistant-2025.1.0+-green.svg)
![Automated Releases](https://img.shields.io/badge/releases-automated-green.svg)

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=dzarlax&repository=HASS-Serbian-transport&category=integration)

Advanced Home Assistant integration for Serbian public transport with real-time arrivals, beautiful animations, visual configuration, and intelligent station selection.

## ğŸ“¸ Screenshots

### Main Interface
- **ğŸ¯ Station Selection Dropdown** - Easily choose which stations to monitor
- **ğŸ“Š Real-time Arrivals** - Color-coded departure times with progress indicators
- **ğŸ¨ Modern UI** - Clean, responsive design that works on all devices

### Configuration Interface
- **âš™ï¸ Visual Editor** - No YAML required, configure everything through the UI
- **ğŸ”§ Smart Defaults** - Automatically detects nearby stations based on your location
- **ğŸ“± Mobile Optimized** - Perfect for Home Assistant Companion app

## âœ¨ Features

### Core Features
- ğŸšŒ **Real-time transport arrivals** - Live data from official transport APIs
- ğŸ“ **Coordinate-based discovery** - Automatically finds nearby stops using your coordinates
- ğŸ¨ **Modern visual interface** - Beautiful animations, color-coded arrivals, progress bars
- âš™ï¸ **Visual configuration** - Easy setup through Home Assistant UI (no YAML required)
- ğŸ“± **Responsive design** - Works perfectly on mobile and desktop

### Advanced Features
- ğŸ¯ **Intelligent station selection** - Choose specific stations to display with dropdown interface
- ğŸ“Š **Progress bars** - Visual time indicators with color coding
- ğŸ”„ **Expandable view** - Compact/expanded modes for different use cases
- ğŸ­ **Smooth animations** - Hover effects and transitions for modern UX
- ğŸ”§ **Automated versioning** - Continuous delivery with automated releases and changelog
- âš¡ **Smart caching** - Optimized data fetching with error handling

## ğŸ™ï¸ Supported Cities
- **Belgrade** (GSP Belgrade)
- **Novi Sad** (JGSP Novi Sad) 
- **NiÅ¡** (JKP Direkcija za javni prevoz grada NiÅ¡a)

## ğŸ“¦ Installation

### One-Click Installation (Easiest)
Click the button below to automatically open HACS and install the integration:

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=dzarlax&repository=HASS-Serbian-transport&category=integration)

After installation, add the integration to your Home Assistant:

[![Open your Home Assistant instance and start setting up a new integration.](https://my.home-assistant.io/badges/config_flow_start.svg)](https://my.home-assistant.io/redirect/config_flow_start/?domain=serbian_transport)

### Via HACS (Manual)
1. Open HACS in Home Assistant
2. Go to "Integrations"
3. Click "Explore & Download Repositories"
4. Search for "Serbian Transport"
5. Download and install
6. Restart Home Assistant
7. Add integration: **Settings** â†’ **Devices & Services** â†’ **Add Integration** â†’ **Serbian Transport**

### Manual Installation
1. Copy the `serbian_transport` folder to your `custom_components` directory
2. Restart Home Assistant
3. Add the integration through the UI

## ğŸ›ï¸ Configuration

### Integration Setup
1. **Settings** â†’ **Devices & Services** â†’ **Add Integration**
2. Search for "Serbian Transport"
3. Enter your coordinates (or use Home Assistant defaults)
4. Set search radius (100-20000 meters)
5. Save configuration

### Card Configuration

#### Visual UI Configuration (Recommended)
1. Add card to dashboard
2. Choose **"Serbian Transport Card"** from the list
3. Configure using the visual editor:
   - **Entity**: Select your transport sensor
   - **Title**: Custom card title
   - **Station Selection**: Choose specific stations to display (dropdown interface)
   - **Max Stations**: Number of stations to display (1-50)
   - **Show Next Departure**: Toggle next departure section
   - **Compact View**: Default view mode
   - **Refresh Interval**: Data update frequency (10-300 seconds)

#### YAML Configuration (Advanced)
```yaml
type: custom:transport-card
entity: sensor.serbian_transport_stations_count
title: "Serbian Transport"
selected_stations: ["Trg Republike", "Autokomanda", "Zeleni Venac"]  # Optional: specific stations
show_next_departure: true
compact_view: false
max_stations: 10
refresh_interval: 30
```

### Configuration Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `entity` | string | **required** | Transport sensor entity ID |
| `title` | string | `"Serbian Transport"` | Card title |
| `selected_stations` | array | `[]` | List of specific station names to display (optional) |
| `show_next_departure` | boolean | `true` | Show next departure section |
| `compact_view` | boolean | `false` | Use compact layout by default |
| `max_stations` | number | `10` | Maximum stations to display (1-50) |
| `refresh_interval` | number | `30` | Update interval in seconds (10-300) |

## ğŸ¨ Visual Features

### Color-Coded Arrivals
- ğŸ”´ **Urgent** (â‰¤2 min) - Red gradient
- ğŸŸ  **Soon** (â‰¤5 min) - Orange gradient  
- ğŸŸ¢ **Normal** (â‰¤15 min) - Green gradient
- ğŸ”µ **Late** (>15 min) - Blue gradient

### Interactive Elements
- **Station selection dropdown** - Choose specific stations to monitor
- **Hover effects** on transport groups
- **Expandable/collapsible** view with animation
- **Progress bars** showing time until arrival
- **Status indicators** for station data availability
- **Smart filtering** - Show only selected stations or all nearby stations

## ğŸ†• What's New in v2.4.0

### ğŸ¯ Station Selection Dropdown
- **Intelligent filtering** - Choose exactly which stations you want to monitor
- **Distance indicators** - See how far each station is from your location
- **"All stations" option** - Toggle between filtered and complete view
- **Persistent selection** - Your choices are saved and restored

### ğŸš€ Automated Development
- **Continuous delivery** - Automatic releases with every feature addition
- **Smart versioning** - Semantic versions based on commit types
- **Auto-generated changelogs** - Beautiful release notes from commit messages
- **HACS integration** - Seamless updates through Home Assistant Community Store

## ğŸ”§ Troubleshooting

### Card Not Appearing
The card should be automatically registered. If it doesn't appear:

1. **Settings** â†’ **Dashboards** â†’ **Resources**
2. Add new resource: `/hacsfiles/HASS-Serbian-transport/transport-card.js`
3. Type: **JavaScript Module**
4. Refresh browser (Ctrl+F5)

### No Data Showing
- Check if coordinates are correct
- Verify search radius (try increasing it)
- Ensure internet connectivity
- Check Home Assistant logs for errors

### Migration Issues
If upgrading from an older version:
- The integration automatically migrates old configurations
- Clear browser cache if the card doesn't update
- Check entity names (might have changed)

## ğŸ—ï¸ Development

This integration is part of the [City Dashboard](https://github.com/dzarlax/city-dashboard) project.

### API Endpoints
- **Production**: `https://transport-api.dzarlax.dev`
- **Fallback cities**: Belgrade (`bg`), Novi Sad (`ns`), NiÅ¡ (`nis`)

## ğŸš€ Development & Releases

This integration features **automated versioning** with continuous delivery:

- ğŸ¤– **Automated releases** via GitHub Actions
- ğŸ“ **Auto-generated changelogs** from commit messages
- ğŸ·ï¸ **Semantic versioning** based on conventional commits
- ğŸ“¦ **HACS compatibility** with automatic updates

### Contributing
- Use [Conventional Commits](https://conventionalcommits.org/) for commit messages
- `feat:` for new features (minor version bump)
- `fix:` for bug fixes (patch version bump)
- `BREAKING:` for breaking changes (major version bump)

### Version History
See [CHANGELOG.md](CHANGELOG.md) for complete version history.

Recent releases:
- **v2.4.0**: Station selection with dropdown interface, automated versioning
- **v2.3.0**: Enhanced UI with improved error handling
- **v2.0.0**: Major rewrite with visual configuration
- **v1.x**: Initial release with basic functionality


# Srpski Transport Integracija

![Verzija](https://img.shields.io/badge/verzija-2.0.0-blue.svg)
![HACS](https://img.shields.io/badge/HACS-kompatibilna-orange.svg)
![Home Assistant](https://img.shields.io/badge/Home%20Assistant-2025.1.0+-green.svg)
![Automatski Relizi](https://img.shields.io/badge/relizi-automatski-green.svg)

[![Otvorite vaÅ¡u Home Assistant instancu i dodajte repozitorijum u Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=dzarlax&repository=HASS-Serbian-transport&category=integration)

Napredna Home Assistant integracija za srpski javni prevoz sa dolaskom u realnom vremenu, lepim animacijama, vizuelnom konfiguracijom i inteligentnim izborom stanica.

## ğŸ“¸ Snimci ekrana

### Glavni interfejs
- **ğŸ¯ Dropdown za izbor stanica** - Lako birate koje stanice Å¾elite da pratite
- **ğŸ“Š Dolasci u realnom vremenu** - Vremena polaska oznaÄena bojama sa indikatorima napretka
- **ğŸ¨ Moderan UI** - ÄŒist, responsive dizajn koji radi na svim ureÄ‘ajima

### Interfejs za konfiguraciju
- **âš™ï¸ Vizuelni editor** - YAML nije potreban, konfiguriÅ¡e se sve kroz UI
- **ğŸ”§ Pametni default-ovi** - Automatski otkriva obliÅ¾nje stanice na osnovu vaÅ¡e lokacije
- **ğŸ“± Optimizovano za mobilne** - SavrÅ¡eno za Home Assistant Companion aplikaciju

## âœ¨ Funkcije

### Osnovne funkcije
- ğŸšŒ **Dolasci prevoza u realnom vremenu** - Å½ivi podaci sa zvaniÄnih transport API-ja
- ğŸ“ **Otkrivanje bazirano na koordinatama** - Automatski pronalazi obliÅ¾nje stanice koristeÄ‡i vaÅ¡e koordinate
- ğŸ¨ **Moderan vizuelni interfejs** - Lepe animacije, dolasci u boji, trake napretka
- âš™ï¸ **Vizuelna konfiguracija** - Lako podeÅ¡avanje kroz Home Assistant UI (YAML nije potreban)
- ğŸ“± **Responsive dizajn** - SavrÅ¡eno radi na mobilnim ureÄ‘ajima i desktopima

### Napredne funkcije  
- ğŸ¯ **Inteligentni izbor stanica** - Biraju se specifiÄne stanice za prikaz sa dropdown interfejsom
- ğŸ“Š **Trake napretka** - Vizuelni indikatori vremena sa kodiranjem u boji
- ğŸ”„ **ProÅ¡iriv prikaz** - Kompaktni/proÅ¡ireni reÅ¾imi za razliÄite sluÄajeve koriÅ¡Ä‡enja
- ğŸ­ **Glatke animacije** - Hover efekti i prelazi za moderan UX
- ğŸ”§ **Automatsko verzioniranje** - Kontinuirano dostavljanje sa automatskim relizima i changelog-om
- âš¡ **Pametno keÅ¡iranje** - Optimizovano preuzimanje podataka sa rukovanjem greÅ¡kama

## ğŸ™ï¸ PodrÅ¾ani gradovi
- **Beograd** (GSP Beograd)
- **Novi Sad** (JGSP Novi Sad)
- **NiÅ¡** (JKP Direkcija za javni prevoz grada NiÅ¡a)

## ğŸ“¦ Instalacija

### Instalacija jednim klikom (NajlakÅ¡e)
Kliknite dugme ispod da automatski otvorite HACS i instalirate integraciju:

[![Otvorite vaÅ¡u Home Assistant instancu i dodajte repozitorijum u Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=dzarlax&repository=HASS-Serbian-transport&category=integration)

Nakon instalacije, dodajte integraciju u vaÅ¡ Home Assistant:

[![Otvorite vaÅ¡u Home Assistant instancu i poÄnite podeÅ¡avanje nove integracije.](https://my.home-assistant.io/badges/config_flow_start.svg)](https://my.home-assistant.io/redirect/config_flow_start/?domain=serbian_transport)

### Preko HACS-a (RuÄno)
1. Otvorite HACS u Home Assistant-u
2. Idite na "Integracije"
3. Kliknite "IstraÅ¾ite i preuzmite repozitorijume"
4. TraÅ¾ite "Serbian Transport"
5. Preuzmite i instalirajte
6. Restartujte Home Assistant
7. Dodajte integraciju: **PodeÅ¡avanja** â†’ **UreÄ‘aji i Servisi** â†’ **Dodaj Integraciju** â†’ **Serbian Transport**

### RuÄna instalacija
1. Kopirajte `serbian_transport` folder u vaÅ¡ `custom_components` direktorijum
2. Restartujte Home Assistant
3. Dodajte integraciju preko UI-ja

## ğŸ›ï¸ Konfiguracija

### PodeÅ¡avanje integracije
1. **PodeÅ¡avanja** â†’ **UreÄ‘aji i Servisi** â†’ **Dodaj Integraciju**
2. TraÅ¾ite "Serbian Transport"
3. Unesite vaÅ¡e koordinate (ili koristite Home Assistant podrazumevane)
4. Postavite radijus pretrage (100-20000 metara)
5. SaÄuvajte konfiguraciju

### Konfiguracija kartice

#### Vizuelna UI konfiguracija (PreporuÄeno)
1. Dodajte karticu na kontrolnu tablu
2. Izaberite **"Serbian Transport Card"** sa liste
3. KonfiguriÅ¡ite koristeÄ‡i vizuelni editor:
   - **Entity**: Izaberite vaÅ¡ transport senzor
   - **Title**: PrilagoÄ‘eni naslov kartice
   - **Station Selection**: Izaberite specifiÄne stanice za prikaz (dropdown interfejs)
   - **Max Stations**: Broj stanica za prikaz (1-50)
   - **Show Next Departure**: UkljuÄi/iskljuÄi sekciju sledeÄ‡eg polaska
   - **Compact View**: Podrazumevani reÅ¾im prikaza
   - **Refresh Interval**: Frekvencija aÅ¾uriranja podataka (10-300 sekundi)

#### YAML konfiguracija (Napredna)
```yaml
type: custom:transport-card
entity: sensor.serbian_transport_stations_count
title: "Serbian Transport"
selected_stations: ["Trg Republike", "Autokomanda", "Zeleni Venac"]  # Opciono: specifiÄne stanice
show_next_departure: true
compact_view: false
max_stations: 10
refresh_interval: 30
```

### Opcije konfiguracije

| Opcija | Tip | Podrazumevano | Opis |
|--------|-----|---------------|------|
| `entity` | string | **obavezno** | ID transport senzor entiteta |
| `title` | string | `"Serbian Transport"` | Naslov kartice |
| `selected_stations` | array | `[]` | Lista specifiÄnih imena stanica za prikaz (opciono) |
| `show_next_departure` | boolean | `true` | PrikaÅ¾i sekciju sledeÄ‡eg polaska |
| `compact_view` | boolean | `false` | Koristi kompaktni layout po default-u |
| `max_stations` | number | `10` | Maksimalno stanica za prikaz (1-50) |
| `refresh_interval` | number | `30` | Interval aÅ¾uriranja u sekundama (10-300) |

## ğŸ¨ Vizuelne funkcije

### Dolasci oznaÄeni bojama
- ğŸ”´ **Hitno** (â‰¤2 min) - Crveni gradijent
- ğŸŸ  **Uskoro** (â‰¤5 min) - NarandÅ¾asti gradijent
- ğŸŸ¢ **Normalno** (â‰¤15 min) - Zeleni gradijent
- ğŸ”µ **Kasno** (>15 min) - Plavi gradijent

### Interaktivni elementi
- **Dropdown za izbor stanica** - Biraju se specifiÄne stanice za praÄ‡enje
- **Hover efekti** na transport grupama
- **ProÅ¡iriv/sklopiv** prikaz sa animacijom
- **Trake napretka** koje prikazuju vreme do dolaska
- **Status indikatori** za dostupnost podataka stanice
- **Pametno filtriranje** - PrikaÅ¾i samo izabrane stanice ili sve bliske stanice

## ğŸ†• Å ta je novo u v2.4.0

### ğŸ¯ Dropdown za izbor stanica
- **Inteligentno filtriranje** - Birate taÄno koje stanice Å¾elite da pratite
- **Indikatori udaljenosti** - Vidite koliko je daleko svaka stanica od vaÅ¡e lokacije
- **Opcija "Sve stanice"** - Prebacivanje izmeÄ‘u filtriranog i kompletnog prikaza
- **Perzistentni izbor** - VaÅ¡i izbori se Äuvaju i vraÄ‡aju

### ğŸš€ Automatizovan razvoj
- **Kontinuirano dostavljanje** - Automatski relizi sa svakim dodavanjem funkcije
- **Pametno verzioniranje** - SemantiÄke verzije na osnovu tipova commit-a
- **Automatski generisani changelog-ovi** - Lepe release note iz commit poruka
- **HACS integracija** - Besprekorna aÅ¾uriranja kroz Home Assistant Community Store

## ğŸ”§ ReÅ¡avanje problema

### Kartica se ne pojavljuje
Kartica treba da bude automatski registrovana. Ako se ne pojavljuje:

1. **PodeÅ¡avanja** â†’ **Kontrolne table** â†’ **Resursi**
2. Dodajte novi resurs: `/hacsfiles/HASS-Serbian-transport/transport-card.js`
3. Tip: **JavaScript Module**
4. OsveÅ¾ite browser (Ctrl+F5)

### Nema podataka
- Proverite da li su koordinate ispravne
- Proverite radijus pretrage (pokuÅ¡ajte da ga poveÄ‡ate)
- Obezbedite internet konekciju
- Proverite Home Assistant logove za greÅ¡ke

### Problemi sa migracijom
Ako nadograÄ‘ujete sa starije verzije:
- Integracija automatski migrira stare konfiguracije
- Obrisite browser keÅ¡ ako se kartica ne aÅ¾urira
- Proverite imena entiteta (moÅ¾da su se promenila)

## ğŸ—ï¸ Razvoj

Ova integracija je deo [City Dashboard](https://github.com/dzarlax/city-dashboard) projekta.

### API Endpoints
- **Produkcija**: `https://transport-api.dzarlax.dev`
- **Fallback gradovi**: Beograd (`bg`), Novi Sad (`ns`), NiÅ¡ (`nis`)

## ğŸš€ Razvoj i Relizi

Ova integracija ima **automatsko verzioniranje** sa kontinuiranim dostavljanjem:

- ğŸ¤– **Automatski relizi** preko GitHub Actions
- ğŸ“ **Automatski generisan changelog** iz commit poruka
- ğŸ·ï¸ **SemantiÄko verzioniranje** bazirano na konvencionalnim commit-ima
- ğŸ“¦ **HACS kompatibilnost** sa automatskim aÅ¾uriranjima

### DoprinoÅ¡enje
- Koristite [Konvencionalne Commit-e](https://conventionalcommits.org/) za commit poruke
- `feat:` za nove funkcije (minor verzija)
- `fix:` za popravke greÅ¡aka (patch verzija)
- `BREAKING:` za prekidajuÄ‡e promene (major verzija)

### Istorija verzija
Pogledajte [CHANGELOG.md](CHANGELOG.md) za kompletnu istoriju verzija.

Nedavni relizi:
- **v2.4.0**: Izbor stanica sa dropdown interfejsom, automatsko verzioniranje
- **v2.3.0**: PoboljÅ¡an UI sa proraÄunavanjem greÅ¡aka
- **v2.0.0**: Velika prepravka sa vizuelnom konfiguracijom
- **v1.x**: PoÄetno izdanje sa osnovnim funkcionalnostima


## Attribution / Atribucija

In this project, the bus icon from [Flaticon](https://www.flaticon.com/free-icons/bus) is used. Bus icons created by Freepik - Flaticon.

U ovom projektu koriÅ¡Ä‡ena je ikonica autobusa sa [Flaticon](https://www.flaticon.com/free-icons/bus). Bus ikonice kreirao Freepik - Flaticon.